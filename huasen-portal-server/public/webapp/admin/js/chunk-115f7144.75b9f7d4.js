(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-115f7144"],{"5e19":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-list"},[a("header",[a("el-row",{staticClass:"w-full px-10-px",attrs:{gutter:10}},[a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{placeholder:"请输入昵称"},model:{value:e.nameKey,callback:function(t){e.nameKey=t},expression:"nameKey"}})],1),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{placeholder:"请输入账号"},model:{value:e.aidKey,callback:function(t){e.aidKey=t},expression:"aidKey"}})],1),a("el-col",{attrs:{span:8}},[a("el-button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:e.getAdminByAidOrNameKey}},[e._v(" 查询 ")]),a("el-button",{staticClass:"search-btn",attrs:{type:"success"},on:{click:e.openAddAdminPanel}},[e._v(" 新增 ")])],1)],1)],1),a("main",{staticClass:"mt-px-20"},[a("el-table",{staticClass:"news-table",staticStyle:{width:"100%"},attrs:{height:"660",border:"",data:e.adminData}},[a("el-table-column",{attrs:{prop:"aid",label:"账号","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"password",label:"密码","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"name",label:"昵称","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"headImg",label:"头像","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.headImg||"-")+" ")]}}])}),a("el-table-column",{attrs:{prop:"code",label:"权限码","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"site",label:"站点链接","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"toy",label:"趣玩链接","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"resource",label:"资源","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"config",label:"配置","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"notice",label:"公告","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"take",label:"订阅数","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"takeAbled",label:"开放订阅","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.takeAbled?"是":"否")+" ")]}}])}),a("el-table-column",{attrs:{width:"180",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popconfirm",{staticClass:"mr-px-5",attrs:{"popper-class":"delete-popcomfirm",title:"您确定删除该表单项吗？"},on:{confirm:function(a){return e.deleteAdminItem(t)}}},[a("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[e._v("删除")])],1),a("el-button",{staticClass:"p-px-10",attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.openEditAdminPanel(t)}}},[e._v(" 编辑 ")])]}}])})],1),a("el-pagination",{staticClass:"flex justify-end my-px-10",attrs:{"current-page":e.currentPage,background:"","page-sizes":[10,20,50,100],pageSize:e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalNum,"popper-class":"page-size-popper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-drawer",{staticClass:"drawer-group",attrs:{title:e.isAddMode?"添加管理员":"编辑管理员",visible:e.openAdminPanelTag,direction:"rtl",size:"435px"},on:{"update:visible":function(t){e.openAdminPanelTag=t},close:e.closeAdminPanel}},[a("div",{staticClass:"drawer-type-content px-px-10 pt-px-10"},[a("el-form",{ref:"adminForm",staticClass:"bg-white py-px-20 px-px-10",attrs:{rules:e.adminRules,"label-position":"top",model:e.adminForm}},[a("el-form-item",{attrs:{label:"账号",prop:"aid"}},[a("el-input",{attrs:{placeholder:"请输入账号",clearable:"",disabled:!e.isAddMode},model:{value:e.adminForm.aid,callback:function(t){e.$set(e.adminForm,"aid",t)},expression:"adminForm.aid"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{placeholder:"请输入密码",clearable:""},model:{value:e.adminForm.password,callback:function(t){e.$set(e.adminForm,"password",t)},expression:"adminForm.password"}})],1),a("el-form-item",{attrs:{label:"昵称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入昵称",clearable:""},model:{value:e.adminForm.name,callback:function(t){e.$set(e.adminForm,"name",t)},expression:"adminForm.name"}})],1),a("el-form-item",{attrs:{label:"头像链接",prop:"headImg"}},[a("el-input",{attrs:{placeholder:"请输入头像链接",clearable:""},model:{value:e.adminForm.headImg,callback:function(t){e.$set(e.adminForm,"headImg",t)},expression:"adminForm.headImg"}})],1),a("el-form-item",{attrs:{label:"权限码",prop:"code"}},[a("el-select",{staticClass:"w-full",attrs:{"popper-class":"code-select","popper-append-to-body":!1},model:{value:e.adminForm.code,callback:function(t){e.$set(e.adminForm,"code",t)},expression:"adminForm.code"}},e._l(e.codeSelectOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"站点链接",prop:"site"}},[a("el-input",{attrs:{placeholder:"JSON数组",clearable:""},model:{value:e.adminForm.site,callback:function(t){e.$set(e.adminForm,"site",t)},expression:"adminForm.site"}})],1),a("el-form-item",{attrs:{label:"趣味",prop:"toy"}},[a("el-input",{attrs:{placeholder:"JSON数组",clearable:""},model:{value:e.adminForm.toy,callback:function(t){e.$set(e.adminForm,"toy",t)},expression:"adminForm.toy"}})],1),a("el-form-item",{attrs:{label:"资源",prop:"resource"}},[a("el-input",{attrs:{placeholder:"JSON数组",clearable:""},model:{value:e.adminForm.resource,callback:function(t){e.$set(e.adminForm,"resource",t)},expression:"adminForm.resource"}})],1),a("el-form-item",{attrs:{label:"配置",prop:"config"}},[a("el-input",{attrs:{placeholder:"JSON对象",clearable:""},model:{value:e.adminForm.config,callback:function(t){e.$set(e.adminForm,"config",t)},expression:"adminForm.config"}})],1),a("el-form-item",{attrs:{label:"公告",prop:"notice"}},[a("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入公告",clearable:""},model:{value:e.adminForm.notice,callback:function(t){e.$set(e.adminForm,"notice",t)},expression:"adminForm.notice"}})],1),a("el-form-item",{attrs:{label:"订阅数",prop:"take"}},[a("el-input",{attrs:{type:"number",placeholder:"请输入订阅数",clearable:""},model:{value:e.adminForm.take,callback:function(t){e.$set(e.adminForm,"take",t)},expression:"adminForm.take"}})],1),a("el-form-item",{attrs:{label:"开放订阅",prop:"takeAbled"}},[a("el-select",{staticClass:"w-full",attrs:{"popper-class":"take-abled-select","popper-append-to-body":!1},model:{value:e.adminForm.takeAbled,callback:function(t){e.$set(e.adminForm,"takeAbled",t)},expression:"adminForm.takeAbled"}},e._l(e.takeAbledSelectOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.submitAdmin}},[e._v(" "+e._s(e.isAddMode?"确认添加":"完成编辑")+" ")])],1)],1)],1)])],1)},n=[],l=a("5530"),o=a("dc92"),i={name:"AdminList",data:function(){var e=function(e,t,a){var r=new o["a"];r.add(t,[{strategy:"isNoEmpty",errMsg:"必填项"}]);var n=r.start();n&&a(new Error(n)),a()},t=function(e,t,a){var r=new o["a"];r.add(t,[{strategy:"isUrl",errMsg:"请输入正确网址链接"}]);var n=r.start();n&&a(new Error(n)),a()},a=function(e,t,a){var r=new o["a"];r.add(t,[{strategy:"isNoEmpty",errMsg:"链接不能为空"},{strategy:"isEmail",errMsg:"请输入正确邮箱地址"}]);var n=r.start();n&&a(new Error(n)),a()},r=function(e,t,a){var r=new o["a"];r.add(t,[{strategy:"isNoEmpty",errMsg:"链接不能为空"},{strategy:"minLength:2",errMsg:"不能少于2个字符"}]);var n=r.start();n&&a(new Error(n)),a()},n=function(e,t,a){var r=new o["a"];r.add(t,[{strategy:"isJSONObject",errMsg:'JSON格式示例：{"name": "花森", "age": 18}'}]);var n=r.start();n&&a(new Error(n)),a()},l=function(e,t,a){var r=new o["a"];r.add(t,[{strategy:"isJSONArray",errMsg:"JSON格式示例：[{},{}]"}]);var n=r.start();n&&a(new Error(n)),a()};return{isAddMode:!0,openAdminPanelTag:!1,currentRowIndex:-1,nameKey:"",aidKey:"",adminData:[],adminForm:{aid:"",password:"",name:"",headImg:"",config:"",site:"",toy:"",resource:"",code:3,take:0,notice:"",takeAbled:!1},adminRules:{aid:[{validator:e,trigger:"blur"},{validator:a,trigger:"blur"}],password:[{validator:e,trigger:"blur"}],name:[{validator:e,trigger:"blur"},{validator:r,trigger:"blur"}],notice:[{validator:l,trigger:"blur"}],headImg:[{validator:t,trigger:"blur"}],site:[{validator:l,trigger:"blur"}],config:[{validator:n,trigger:"blur"}],toy:[{validator:l,trigger:"blur"}],resource:[{validator:l,trigger:"blur"}]},takeAbledSelectOptions:[{value:!0,label:"是"},{value:!1,label:"否"}],codeSelectOptions:[{value:0,label:"0-普通用户"},{value:1,label:"1-特权用户"},{value:2,label:"2-管理用户"},{value:3,label:"3-作者权限"}],currentPage:1,pageSize:10,totalNum:0}},created:function(){this.queryAllAdminByPage()},methods:{openAddAdminPanel:function(){this.isAddMode=!0,this.openAdminPanelTag=!0},openEditAdminPanel:function(e){var t=this;this.isAddMode=!1,this.openAdminPanelTag=!0,this.currentRowIndex=e.$index,this.$nextTick((function(){t.adminForm=Object(l["a"])({},e.row)}))},handleSizeChange:function(e){this.pageSize=e,this.queryAllAdminByPage()},handleCurrentChange:function(e){this.currentPage=e,this.queryAllAdminByPage()},closeAdminPanel:function(){this.currentRowIndex=-1,this.$refs.adminForm.resetFields()},deleteAdminItem:function(e){var t=this;this.API.deleteAdmin({aid:e.row.aid}).then((function(e){t.queryAllAdminByPage()}))},getAdminByAidOrNameKey:function(){var e=this;this.API.findAdminByAidOrNameKey({aidKey:this.aidKey,nameKey:this.nameKey}).then((function(t){e.adminData=t.data.data,e.totalNum=t.data.data.length}))},submitAdmin:function(){var e=this;this.$refs.adminForm.validate((function(t){if(t)if(e.isAddMode){var a=Object(l["a"])({},e.adminForm);e.API.register(a).then((function(t){e.queryAllAdminByPage(),e.openAdminPanelTag=!1}))}else{var r=Object(l["a"])(Object(l["a"])(Object(l["a"])({},e.adminData[e.currentRowIndex]),e.adminForm),{},{oldPassword:e.adminData[e.currentRowIndex].password});e.API.updateAdmin(r).then((function(t){e.queryAllAdminByPage(),e.openAdminPanelTag=!1}))}}))},queryAllAdminByPage:function(){var e=this;this.API.findAllAdminByPage({pageId:this.currentPage,pageSize:this.pageSize}).then((function(t){e.adminData=t.data.data.lists,e.totalNum=t.data.data.countNum}))}}},s=i,d=(a("d3a6"),a("2877")),c=Object(d["a"])(s,r,n,!1,null,"554f9466",null);t["default"]=c.exports},d3a6:function(e,t,a){"use strict";a("e4be")},dc92:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return c}));a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0");var r=a("06c5");function n(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=Object(r["a"])(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,l=function(){};return{s:l,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==a["return"]||a["return"]()}finally{if(s)throw o}}}}var l=a("d4ec"),o=a("bee2"),i=a("53ca"),s=(a("d81d"),a("ac1f"),a("1276"),{isNoEmpty:function(e,t){if(""===e)return t},minLength:function(e,t,a){if(e&&e.length<t)return a},maxLength:function(e,t,a){if(e&&e.length>t)return a},isMobile:function(e,t){if(!/(^1[3|5|8][0-9]{9}$)/.test(e))return t},isNumber:function(e,t){if(!/^\d*$/.test(e))return t},isChinese:function(e,t){if(!/^[\u4E00-\u9FA5\uf900-\ufa2d0-9a-zA-Z]+$/.test(e))return t},isName:function(e,t){if(!/^([\u4E00-\u9FA5\uf900-\ufa2d0-9a-zA-Z]·?)*[\u4E00-\u9FA5\uf900-\ufa2d0-9a-zA-Z]$/.test(e))return t},isUrl:function(e,t){if(""!==e)return/^((https?:\/\/)|(www\.))((([0-9]{1,3}\.){3}[0-9]{1,3})|localhost|([a-zA-Z0-9]+\.[a-zA-Z0-9\\-]+)+)((\/[a-zA-Z0-9]*)+|(:\d+\/)|(\/#\/))/.test(e)||/^public\/default(\/[a-zA-Z0-9-]+)+(\/\w+\.\w+)$/.test(e)?void 0:t},isIDCard:function(e,t){if(!/(^\d{15}$)|(^\d{17}(\d|X|x)$)/.test(e))return t},isPlateNumber:function(e,t){if(!/^(([京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领][A-Z](([0-9]{5}[DF])|([DF]([A-HJ-NP-Z0-9])[0-9]{4})))|([京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领][A-Z][A-HJ-NP-Z0-9]{4}[A-HJ-NP-Z0-9挂学警港澳使领]))$/.test(e))return t},isEmail:function(e,t){if(!/^(([^()[\]\\.,;:\s@\\"]+(\.[^()[\]\\.,;:\s@\\"]+)*)|(\\".+\\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e))return t},isJSONObject:function(e,t){if(""!==e)try{var a=JSON.parse(e);if(Array.isArray(a)||"object"!=Object(i["a"])(a))return t}catch(r){return t}},isJSONArray:function(e,t){if(""!==e)try{var a=JSON.parse(e);if(!Array.isArray(a))return t}catch(r){return t}}}),d=function(){function e(t){Object(l["a"])(this,e),this.caches=[]}return Object(o["a"])(e,[{key:"add",value:function(e,t){var a=this;t.map((function(t){var r=t.strategy.split(/:|：/),n=r.shift();r.unshift(e),r.push(t.errMsg),a.caches.push((function(){return s[n].apply(a,r)}))}))}},{key:"start",value:function(){var e,t=n(this.caches);try{for(t.s();!(e=t.n()).done;){var a=e.value,r=a();if(r)return r}}catch(l){t.e(l)}finally{t.f()}}}]),e}();function c(e){var t,a=n(e);try{for(a.s();!(t=a.n()).done;){var r=t.value,l=new d;l.add(r.value,r.rules);var o=l.start();if(o)return o}}catch(i){a.e(i)}finally{a.f()}}},e4be:function(e,t,a){}}]);