(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a6f5062"],{4574:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"NewsManage"},[a("header",[a("el-row",{staticClass:"w-full px-10-px",attrs:{gutter:10}},[a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{placeholder:"请输入文章标题"},model:{value:e.titleKey,callback:function(t){e.titleKey=t},expression:"titleKey"}})],1),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{placeholder:"请输入文章作者"},model:{value:e.publisherKey,callback:function(t){e.publisherKey=t},expression:"publisherKey"}})],1),a("el-col",{attrs:{span:8}},[a("el-button",{staticClass:"search-btn",attrs:{type:"success"},on:{click:e.getNewsByTitleOrPublisherKey}},[e._v(" 查询 ")])],1)],1)],1),a("main",[a("el-table",{staticClass:"news-table",staticStyle:{width:"100%"},attrs:{height:"720",border:"",data:e.newsData}},[a("el-table-column",{attrs:{prop:"title",label:"标题","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"publisher",label:"发布者","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"code",label:"访问码","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.handleNewsCode(t.row.code)||"-")+" ")]}}])}),a("el-table-column",{attrs:{prop:"tag",label:"标签","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.tag||"-")+" ")]}}])}),a("el-table-column",{attrs:{prop:"time",label:"日期","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"isDraft",label:"是否草稿","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.isDraft?"是":"否")+" ")]}}])}),a("el-table-column",{attrs:{prop:"content",label:"内容","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.content||"-")+" ")]}}])}),a("el-table-column",{attrs:{prop:"bannerImg",label:"封面链接","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.bannerImg||"-")+" ")]}}])}),a("el-table-column",{attrs:{width:"180",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popconfirm",{staticClass:"mr-px-5",attrs:{"popper-class":"delete-popcomfirm",title:"您确定删除该表单项吗？"},on:{confirm:function(a){return e.deleteNewsItem(t)}}},[a("el-button",{attrs:{slot:"reference",size:"mini",type:"danger"},slot:"reference"},[e._v("删除")])],1),a("el-button",{staticClass:"p-px-10",attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.editNews(t.row)}}},[e._v(" 编辑 ")])]}}])})],1),a("el-pagination",{staticClass:"flex justify-end my-px-10",attrs:{"current-page":e.currentPage,background:"","page-sizes":[10,20,50,100],pageSize:e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalNum,"popper-class":"page-size-popper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},s=[],n=(a("a434"),{name:"NewsManage",data:function(){return{newsData:[],currentPage:1,pageSize:10,totalNum:0,publisherKey:"",titleKey:""}},created:function(){this.getAllNewsDataByPage()},methods:{getAllNewsDataByPage:function(e){var t=this;this.API.getAllNewsByPage({pageId:this.pageId,pageSize:this.pageSize}).then((function(e){t.newsData=e.data.data.lists,t.totalNum=e.data.data.countNum}))},getNewsByTitleOrPublisherKey:function(){var e=this;this.API.findNewsByTitleOrTagKey({publisherKey:this.publisherKey,titleKey:this.titleKey}).then((function(t){e.newsData=t.data.data,e.totalNum=t.data.data.length})).catch((function(e){}))},handleNewsCode:function(e){var t="";switch(e){case 0:t="普通用户";break;case 1:t="特权用户";break;case 2:t="管理用户";break;case 3:t="作者权限";break}return t},deleteNewsItem:function(e){var t=this;this.API.deleteNewsById({_id:e.row._id}).then((function(a){t.newsData.splice(e.$index,1)}))},editNews:function(e){this.$router.push({name:"Public",params:e})},handleSizeChange:function(e){this.pageSize=e,this.getAllNewsDataByPage()},handleCurrentChange:function(e){this.pageId=e,this.getAllNewsDataByPage()}}}),o=n,r=(a("8921"),a("2877")),i=Object(r["a"])(o,l,s,!1,null,"47a0742d",null);t["default"]=i.exports},7627:function(e,t,a){},8921:function(e,t,a){"use strict";a("7627")}}]);